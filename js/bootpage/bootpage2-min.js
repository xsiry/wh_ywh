(function(a,b){if(typeof exports!=="undefined"&&typeof module!=="undefined"&&module.exports){module.exports=b()}else{if(typeof define==="function"&&define.amd){define(b)}else{a.js2form=b()}}}(this,function(){var f=/^\[\d+?\]/,j=/^[a-zA-Z_][a-zA-Z_0-9]*/,l=/\[[0-9]+?\]$/,g=/(.*)(\[)([0-9]*)(\])$/,k=/\[([0-9]+)\]\[([0-9]+)\]/g,d=/INPUT|TEXTAREA/i;function h(q,s,m,u,p){if(arguments.length<3){m="."}if(arguments.length<4){u=null}if(arguments.length<5){p=false}q=(typeof q=="string")?document.getElementById(q):q;var o,r;o=i(s);r=a(q,p,m,{},true);for(var t=0;t<o.length;t++){var v=o[t].name,n=o[t].value;if(typeof r[v]!="undefined"){b(r[v],n)}else{if(typeof r[v.replace(l,"[]")]!="undefined"){b(r[v.replace(l,"[]")],n)}else{if(typeof r[v.replace(l,"")]!="undefined"){b(r[v.replace(l,"")],n)}}}}}function b(q,p){var o,n,m;if(q instanceof Array){for(n=0;n<q.length;n++){if(q[n].value==p||p===true){q[n].checked=true}}}else{if(d.test(q.nodeName)){q.value=p}else{if(/SELECT/i.test(q.nodeName)){o=q.getElementsByTagName("option");for(n=0,m=o.length;n<m;n++){if(o[n].value==p){o[n].selected=true;if(q.multiple){break}}else{if(!q.multiple){o[n].selected=false}}}}}}}function a(q,p,n,v,r){if(arguments.length<4){v={}}var A={},w=q.firstChild,m,o,y,u,t,s,z;while(w){m="";if(w.name&&w.name!=""){m=w.name}else{if(p&&w.id&&w.id!=""){m=w.id}}if(m==""){var x=a(w,p,n,v,r);for(y in x){if(typeof A[y]=="undefined"){A[y]=x[y]}else{for(u=0;u<x[y].length;u++){A[y].push(x[y][u])}}}}else{if(/SELECT/i.test(w.nodeName)){for(t=0,z=w.getElementsByTagName("option"),s=z.length;t<s;t++){if(r){z[t].selected=false}o=e(m,n,v);A[o]=w}}else{if(/INPUT/i.test(w.nodeName)&&/CHECKBOX|RADIO/i.test(w.type)){if(r){w.checked=false}o=e(m,n,v);o=o.replace(l,"[]");if(!A[o]){A[o]=[]}A[o].push(w)}else{if(r){w.value=""}o=e(m,n,v);A[o]=w}}}w=w.nextSibling}return A}function e(o,p,u){var v=[],n=o.split(p),s,r,q,m,w,t;o=o.replace(k,"[$1].[$2]");for(t=0;t<n.length;t++){s=n[t];v.push(s);r=s.match(g);if(r!=null){q=v.join(p);m=q.replace(g,"$3");q=q.replace(g,"$1");if(typeof(u[q])=="undefined"){u[q]={lastIndex:-1,indexes:{}}}if(m==""||typeof u[q].indexes[m]=="undefined"){u[q].lastIndex++;u[q].indexes[m]=u[q].lastIndex}w=u[q].indexes[m];v[v.length-1]=s.replace(g,"$1$2"+w+"$4")}}q=v.join(p);q=q.replace("].[","][");return q}function i(q,o){var m=[],p,n;if(arguments.length==1){o=0}if(q==null){m=[{name:"",value:null}]}else{if(typeof q=="string"||typeof q=="number"||typeof q=="date"||typeof q=="boolean"){m=[{name:"",value:q}]}else{if(q instanceof Array){for(p=0;p<q.length;p++){n="["+p+"]";m=m.concat(c(q[p],n,o+1))}}else{for(p in q){n=p;m=m.concat(c(q[p],n,o+1))}}}}return m}function c(n,q,p){var t;var m=[],o=i(n,p+1),r,s;for(r=0;r<o.length;r++){t=q;if(f.test(o[r].name)){t+=o[r].name}else{if(j.test(o[r].name)){t+="."+o[r].name}}s={name:t,value:o[r].value};m.push(s)}return m}return h}));
